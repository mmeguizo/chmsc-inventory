<nb-card>
  <nb-card-header>
    Add New Deduction
    <button class="close" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true">&times;</span>
    </button>
  </nb-card-header>
  <nb-card-body  [nbSpinner]="sgs.loading" nbSpinnerStatus="success" [formGroup]="form">
      <div class="row">
          <div class="col-sm-12">
      <mat-form-field class="input-example"  >
              <mat-label>Deduction Type:</mat-label>
              <mat-select  formControlName="deductionType" required> 
                <mat-option value="percentage" (click)="deduc()">Percentage</mat-option>
                <mat-option value="amount" (click)="deduc()">Amount</mat-option>
              </mat-select>
              <!-- <mat-error *ngIf="form.get('prefix').touched && form.controls['prefix'].errors?.required">Please select a Prefix</mat-error> -->
           </mat-form-field>
          </div>
      
      </div>
    <div class="row">
      <div class="col-sm-12">
        <mat-form-field class="input-example">
          <mat-label>Deduction</mat-label>
          <input matInput autocomplete="off" formControlName="deductionName" required>
          <mat-error *ngIf="form.get('deductionName').touched && form.controls['deductionName'].errors?.required">Deduction is required</mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12" *ngIf="form.get('deductionType').value === 'amount'">
        <mat-form-field class="input-example">
          <mat-label>Amount</mat-label>
          <input type="number" matInput autocomplete="off" formControlName="deductionAmount" required>
          <mat-error *ngIf="form.get('deductionAmount').touched && form.controls['deductionAmount'].errors?.required">Amount is required</mat-error>
        </mat-form-field>
      </div>
      <div class="col-sm-12" *ngIf="form.get('deductionType').value === 'percentage'">
        <mat-form-field class="input-example">
          <mat-label>Percentage</mat-label>
          <input type="number" matInput autocomplete="off" formControlName="deductionPercentage" required>
          <mat-error *ngIf="form.get('deductionPercentage').touched && form.controls['deductionPercentage'].errors?.required">Percentage is required</mat-error>
        </mat-form-field>
      </div>
    </div>
      
  </nb-card-body>
  <nb-card-footer class="aright">
    <button nbButton matRipple hero status="danger" (click)="closeModal()">Close</button>
    &nbsp;
    <button nbButton matRipple hero status="primary" [disabled]="form?.invalid ||sgs.submitting" (click)="sgs.submitting = true; save()" [nbSpinner]="sgs.submitting" nbSpinnerStatus="success">Save</button>

  </nb-card-footer>
</nb-card>
